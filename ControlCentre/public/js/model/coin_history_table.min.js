var CoinHistory={};jQuery(function(t){CoinHistory=function(e){this.$table=t("#"+e),this.domain=window.location.origin+"/",this.role="",this.uuid="",this.start_date="",this.end_date="",this.interaction="click tap touch",this.tableInit()},CoinHistory.prototype={tableInit:function(){var e=this;e.$table.dataTable({processing:!0,order:[1,"desc"],ajax:"",columns:[{data:"transid"},{data:"time"},{data:"count"},{data:"ref_code"}],dom:'<"back_to_reg_log"><"feature_button"><"datepicker">lfrtip',initComplete:function(){var a=Handlebars.compile(t("#editor_back_btn").html()),i=t("div.back_to_reg_log"),n=Handlebars.compile(t("#editor_controller_bar").html()),o=t("div.feature_button");i.html(a),o.html(n),o.css({"text-align":"center","padding-top":"20px"}),o=t("div.feature_button");var d=t("button",o),r=t("button",i);d.each(function(){t(this).on(e.interaction,function(){var a=t(this).val();"custom"!=a?e.$table.fnReloadAjax(e.domain+"api/cms/coin_history/?index=-1&feature="+a+"&uuid="+e.uuid+"&"+e.role+"=1"):(c.removeClass("hidden"),d.addClass("hidden"))})});var s=Handlebars.compile(t("#editor_datepicker").html()),c=t("div.datepicker");r.on(e.interaction,function(){t("#admin_page_app_reg_wrapper").removeClass("hidden"),t("#coin_history_wrapper").addClass("hidden"),o.removeClass("hidden"),c.addClass("hidden")}),e.$table.css({"text-align":"center","font-size":"14px"}),c.html(s),t("#datepicker_start").datepicker({dateFormat:"yy-mm-dd",onSelect:function(a){var i=t(this).datepicker("getDate");e.start_date=a,t("#datepicker_end").datepicker("option","minDate",i)},maxDate:0}),t("#datepicker_end").datepicker({dateFormat:"yy-mm-dd",onSelect:function(a){var i=t(this).datepicker("getDate");e.start_date=a,t("#datepicker_start").datepicker("option","maxDate",i)},maxDate:0}),c.css({"text-align":"center"}),c.addClass("hidden"),t("#back_to_choice").on(e.interaction,function(){c.addClass("hidden"),d.removeClass("hidden")}),t("#confirm").on(e.interaction,function(){e.$table.fnReloadAjax(e.domain+"api/cms/coin_history/?index=-1&feature=custom&start="+e.start_date+"&end="+e.end_date+"&uuid="+e.uuid+"&"+e.role+"=1")})}})},refresh_table:function(t,e){var a=this;a.role=t,a.uuid=e,console.log(a.domain+"api/cms/coin_history/?index=-1&feature=spot&uuid="+a.uuid+"&"+a.role+"=1"),a.$table.fnReloadAjax(a.domain+"api/cms/coin_history/?index=-1&feature=spot&uuid="+a.uuid+"&"+a.role+"=1")}}});