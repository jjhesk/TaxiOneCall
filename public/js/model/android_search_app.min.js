var AndroidSearchAPI={};jQuery(function(a){AndroidSearchAPI=function(e,i){this.name_component=e,this.key="10334b44b22486861b4cc4a39be9991f",this.app_name=a("#app_name"),this.store_id=a("#store_id"),this.icon=a("#icon_url"),this.description=a("#desc_area"),this.search_api="http://api.playstoreapi.com/v1.1/search/apps/",this.app_info_api="http://api.playstoreapi.com/v1.1/apps/",this.domain=window.location.origin+"/",this.search_word="",this.android_slicker=i,this.android_row_search_app=a("#android_row_search_app"),this.android_search_app=a("#android_search_app"),this.init()},AndroidSearchAPI.prototype={init:function(){var e=this;e.init_select_module(),a(".bigdrop").css({max_height:500}),a("ul.select2-results").css({"max-height":450})},enable:function(a){var e=this;a?(e.android_row_search_app.removeClass("hidden"),e.android_slicker.clear()):e.android_row_search_app.addClass("hidden")},setOnChange:function(a){this.android_search_app.on("change",a)},init_select_module:function(){var e=this;e.select2module=a("#"+e.name_component).select2({fragmentPlatform:Handlebars.compile(a("#t_android").html()),placeholder:"Search for an app",minimumInputLength:2,id:function(a){return{id:a._id}},ajax:{url:function(){return e.search_api+e.search_word},dataType:"json",data:function(a){return e.search_word=a.replace(/\s+/g,""),{key:e.key}},results:function(a){return{results:a}}},initSelection:function(a,e){var i={id:a.val(),text:a.val()};e(i),console.log(i)},selectOnBlur:!0,formatResult:e.parseFormat,formatSelection:e.parseFormatSelection,dropdownCssClass:"bigdrop",closeOnSelect:!0,multiple:!1,escapeMarkup:function(a){return a}}),e.select2module.on("select2-selecting",{that:e},e.fill_in_app_data)},fill_in_app_data:function(a){var e=a.data.that;e.android_slicker.clear();var i=new AJAXLoader(e.app_name,"normal","app_reg"),t=new JAXAPIsupport(e.domain+"api/cms/get_app_info",{url:e.app_info_api+a.choice.itemID+"&?key="+e.key},e,function(a,e){a.icon.val(e.logo),a.app_name.val(e.appName),a.store_id.val(e.packageID.replace(/&/g,"")),a.description.val(e.description.replace(/"/g,"").replace(/\\n/g," ").replace(/\\/g,"")),a.android_slicker.append(e.thumbnails)});t.add_loader(i),t.init()},parseFormat:function(a){var e=this,i="<table class='result_table_listing'>",t=e.fragmentPlatform;return void 0!==a.title&&void 0!==a.itemID&&(i+=t(a)),i+="</table>"},parseFormatSelection:function(e){return a("#android_search_app").val(e.itemID),e.itemID}}});