var AndroidSearchAPI={};jQuery(function(e){AndroidSearchAPI=function(i){this.name_component=i,this.key="10334b44b22486861b4cc4a39be9991f",this.app_name=e("#app_name"),this.store_id=e("#store_id"),this.icon=e("#icon_url"),this.description=e("#desc_area"),this.search_api="http://api.playstoreapi.com/v1.1/search/apps/",this.app_info_api="http://api.playstoreapi.com/v1.1/apps/",this.domain=window.location.origin+"/",this.search_word="",this.slicker={},this.init()},AndroidSearchAPI.prototype={init:function(){var i=this;i.init_select_module(),e(".bigdrop").css({max_height:500}),e("ul.select2-results").css({"max-height":450})},init_select_module:function(){var i=this;i.select2module=e("#"+i.name_component).select2({fragmentPlatform:Handlebars.compile(e("#t_android").html()),placeholder:"Search for an app",minimumInputLength:2,id:function(e){return{id:e._id}},ajax:{url:function(){return i.search_api+i.search_word},dataType:"json",data:function(e){return i.search_word=e.replace(/\s+/g,""),{key:i.key}},results:function(e){return{results:e}}},initSelection:function(e,i){var t={id:e.val(),text:e.val()};i(t),console.log(t)},selectOnBlur:!0,formatResult:i.parseFormat,formatSelection:i.parseFormatSelection,dropdownCssClass:"bigdrop",closeOnSelect:!0,multiple:!1,escapeMarkup:function(e){return e}}),i.select2module.on("select2-selecting",{that:i},i.fill_in_app_data)},fill_in_app_data:function(i){var t=i.data.that,a=e("div.slickerslider"),o="";a.empty(),a.unslick();var n=new AJAXLoader(t.app_name,"normal","app_reg"),s=new JAXAPIsupport(t.domain+"api/cms/get_app_info",{url:t.app_info_api+i.choice.itemID+"&?key="+t.key},{},function(i,n){t.icon.val(n.logo),t.app_name.val(n.appName),t.store_id.val(n.packageID.replace(/&/g,"")),t.description.val(n.description.replace(/"/g,"").replace(/\\n/g," ").replace(/\\/g,"")),e.each(n.thumbnails,function(e,i){o+="<div style=\"margin:5px;\"><img class='lazy_pic' data-lazy="+i+"></div>"}),a.html(o).css("height","300px"),a.slick({dots:!1,lazyLoad:"ondemand",slidesToShow:4,slidesToScroll:2,accessibility:!1,adaptiveHeight:!1,variableWidth:!0,swipeToSlide:!0,infinite:!0,onInit:function(){},autoplay:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}],autoplaySpeed:2e3}),t.slicker=a,console.log(t.slicker.getSlick())});s.add_loader(n),s.init()},parseFormat:function(e){var i=this,t="<table class='result_table_listing'>",a=i.fragmentPlatform;return void 0!==e.title&&void 0!==e.itemID&&(t+=a(e)),t+="</table>"},parseFormatSelection:function(i){return e("#android_search_app").val(i.itemID),i.itemID}}});